---
layout: post
title: GitLab持续集成（CI）和持续交付（CD）
date: 2019-12-02
categories: GitLab,GitLab CI/CD
tags: GitLab CI/CD
---
本文介绍GitLab持续集成（CI）和持续交付（CD）。

## 持续集成内置于GitLab

*持续集成* (CI)致力于将团队中的代码集成到共享存储库中。开发人员在“合并（拉）”请求中共享其新代码，这会在合并存储库中的更改之前触发管道来构建，测试和验证新代码。

*持续交付* (CD)将持续集成(CI)验证的代码交付给应用程序。

CI和CD一起可以加快团队为客户和利益相关者交付成果的速度。CI可帮助您在开发周期的早期发现并减少错误，并将已验证的CD更快地移至您的应用程序。

## 什么是CI?

*持续集成* (Continuous Integration)是一种将代码集成到共享存储库中，并尽早（通常一天一次）自动构建/测试每个更改的实践。

## 什么是CD?
*持续交付* (Continuous Delivery)增加了软件可以在任何时候发布到生产环境中，通常是通过自动将更改推送到临时系统中。

*持续部署* (Continuous Deployment)会更进一步，并自动将更改推送到生产环境中。

## 为什么需要CI / CD工作流程

### 持续集成

* ***尽快发现错误***：在开发人员重新思考的同时解决问题
* ***减少集成问题***：更小的问题更容易消化
* ***避免复杂的问题***：使团队更加自信地发展更快

### 持续交付

* ***确保每个更改都是可发布的***：在完成之前测试所有内容，包括部署
* ***降低每次发布的风险***：使发布“无聊”
* ***更加频繁地交付价值***：可靠的部署意味着更多的发布
* ***紧密的客户反馈循环***：快速而频繁的客户对变更的反馈

![](../gitlab-runner-1.png)

## GitLab CI / CD的优点

* ***集成***：GitLab CI / CD是GitLab的一部分，支持从计划到部署（甚至更多）的单个对话
* ***开源***：CI / CD是开源GitLab社区版和专有GitLab企业版的一部分
* ***易于学习***：请参阅官方[快速入门](https://docs.gitlab.com/ee/ci/quick_start/)指南
* ***无缝***：是单个GitLab应用程序的一部分，具有出色的用户体验
* ***可扩展***：测试可以在单独的计算机上分布式运行，可以根据需要添加任意数量的计算机
* ***更快的结果***：每个构建可以拆分为多个作业，这些作业可以在多台计算机上并行运行
* ***针对交付进行了优化***：多个阶段，手动部署入口，环境和变量

## GitLab CI / CD的特征

* ***多平台***：可以在Unix，Windows，macOS和任何其他支持Go的平台上执行构建。
* ***多国语言***：构建脚本是命令行驱动的，并且可以与Java，PHP，Ruby，C和任何其他语言一起使用。
* ***稳定***：构建在与GitLab不同的机器上运行。
* ***并行构建***：GitLab CI / CD在多台机器上拆分构建，以实现快速执行。
* ***实时日志记录***：合并请求中的链接将您带到动态更新的当前构建日志。
* ***灵活的管道***：可以在每个阶段定义多个并行作业，并且可以触发其他构建。
* ***版本管道***：一个 `.gitlab-ci.yml` 文件包含测试，整个过程的步骤，使每个人都能贡献更改，并确保每个分支获得所需的管道。
* ***自动缩放***：可以自动旋转虚拟机,以确保立即处理您的构建并将成本降至最低。
* ***构建工件***：您可以将二进制文件和其他构建工件上传到GitLab并浏览和下载它们。
* ***本地测试***：有多个执行程序，可以在本地复制测试。
* ***Docker支持***：可以使用自定义Docker镜像，作为测试的一部分启动服务，构建新的Docker镜像，甚至可以在Kubernetes上运行。
* ***容器注册表***：内置的容器注册表，用于存储，共享和使用容器镜像。
* ***受保护的变量***：在部署期间使用受每个环境保护的变量安全地存储和使用机密信息。
* ***环境***：定义多个环境，包括临时Review Apps请参阅每个环境的部署历史记录。
